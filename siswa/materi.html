<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruang Belajar - MindUp</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

    <style>
        :root {
            /* KONSISTENSI WARNA */
            --primary-blue: #0d6efd; 
            --dark-blue: #0a429b;
            --light-blue-bg: #f0f7ff;
            
            /* Warna Netral Modern */
            --slate-50: #f8fafc;
            --slate-200: #e2e8f0;
            --slate-600: #475569;
            --slate-800: #1e293b;
            --emerald-500: #10b981;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--slate-50);
            padding-top: 80px; 
            color: var(--slate-800);
        }

        h1, h2, h3, h4, h5 { font-family: 'Poppins', sans-serif; font-weight: 600; }

        /* --- 1. NAVBAR --- */
        .navbar {
            background-color: white;
            box-shadow: 0 2px 15px rgba(0,0,0,0.03);
            min-height: 70px;
        }
        
        .nav-profile-img { 
            width: 40px; height: 40px; border-radius: 50%; object-fit: cover; 
            border: 2px solid var(--primary-blue); 
        }

        .btn-nav-back {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 6px 16px;
            background-color: var(--light-blue-bg);
            color: var(--primary-blue);
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.85rem;
            text-decoration: none;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .btn-nav-back:hover {
            background-color: var(--primary-blue);
            color: white;
            transform: translateX(-3px);
        }

        /* --- 2. SIDEBAR LIST --- */
        .sidebar-card {
            background: white; border: 1px solid var(--slate-200);
            border-radius: 16px; 
            position: sticky; top: 100px;
            overflow: hidden;
        }
        .module-item {
            padding: 16px 20px;
            cursor: pointer;
            border-left: 4px solid transparent;
            transition: all 0.2s;
        }
        .module-item:hover { background-color: var(--light-blue-bg); }
        
        .module-item.active {
            background-color: var(--light-blue-bg);
            border-left-color: var(--primary-blue);
        }
        .module-item.active .module-title { color: var(--primary-blue); font-weight: 700; }
        
        .module-icon { 
            width: 32px; height: 32px; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center;
            background: #f1f5f9; color: #64748b;
        }
        .module-item.active .module-icon { background: var(--primary-blue); color: white; }

        /* --- 3. KONTEN UTAMA --- */
        .content-card {
            background: white; border-radius: 20px; 
            border: 1px solid var(--slate-200);
            padding: 40px;
            min-height: 600px;
        }
        
        .article-content { line-height: 1.8; color: var(--slate-600); font-size: 1.05rem; }
        .article-content h3 { 
            color: var(--slate-800); font-size: 1.35rem; margin-top: 2.5rem; margin-bottom: 1rem;
        }
        .article-content ul, .article-content ol { margin-bottom: 1.5rem; }
        .article-content li { margin-bottom: 0.5rem; }
        
        .highlight-box {
            background-color: #ecfdf5;
            border: 1px solid #a7f3d0;
            border-radius: 12px;
            padding: 25px;
            color: #065f46;
            margin: 25px 0;
        }
        .highlight-box h5 { color: #047857; margin-bottom: 15px; font-weight: 700; }

        /* --- 4. TOMBOL NAVIGASI MODERN --- */
        .action-bar {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid var(--slate-200);
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .btn-modern {
            display: flex; align-items: center; justify-content: center;
            padding: 0; 
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            border: none;
            transition: all 0.2s ease;
            width: 100%; 
            height: 54px;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .btn-prev {
            background-color: white; 
            color: var(--slate-600);
            border: 2px solid var(--slate-200);
        }
        .btn-prev:hover:not(:disabled) { border-color: var(--slate-600); color: var(--slate-800); }
        .btn-prev:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-next {
            background-color: var(--primary-blue); color: white;
        }
        .btn-next:hover { background-color: var(--dark-blue); transform: translateY(-2px); box-shadow: 0 4px 10px rgba(13, 110, 253, 0.3); }

        .btn-done {
            background-color: var(--emerald-500); color: white;
        }
        .btn-done:hover { background-color: #059669; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3); }

        @media (max-width: 768px) {
            .action-bar { grid-template-columns: 1fr; gap: 12px; } 
            .sidebar-card { display: none; }
            .content-card { padding: 25px; }
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a href="index.html" class="btn-nav-back text-decoration-none">
                <i class="bi bi-arrow-left me-2"></i>Kembali ke Beranda
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item dropdown ms-lg-3">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                            <span class="me-2 d-none d-lg-block text-dark fw-bold" id="navUserName">Siswa MindUp</span>
                            <img src="https://ui-avatars.com/api/?name=Siswa+M&background=0d6efd&color=fff" alt="Profile" class="nav-profile-img">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end border-0 shadow">
                            <li><a class="dropdown-item" href="profil.html"><i class="bi bi-person me-2"></i>Profil Saya</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" onclick="handleLogout()"><i class="bi bi-box-arrow-right me-2"></i>Keluar</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <div class="row">
            
            <div class="col-lg-4 d-none d-lg-block">
                <div class="sidebar-card shadow-sm">
                    <div class="p-3 border-bottom bg-white">
                        <h6 class="fw-bold m-0 text-uppercase small text-muted ls-1">Kurikulum Resiliensi</h6>
                    </div>
                    <div id="moduleList">
                        </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="content-card shadow-sm">
                    
                    <div class="mb-4 pb-3 border-bottom">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <span class="badge bg-light text-primary border mb-2 px-3 py-2 rounded-pill fw-normal" id="mCategory">TEXT</span>
                            <span class="text-muted small d-flex align-items-center"><i class="bi bi-clock me-1"></i> <span id="mDuration">10 Menit</span></span>
                        </div>
                        <h1 class="fw-bold text-dark display-6 mb-0" id="mTitle">Memuat Materi...</h1>
                    </div>

                    <div id="audioContainer" class="bg-light p-4 rounded-4 mb-4 border d-none">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-white p-2 rounded-circle shadow-sm me-3 text-primary">
                                <i class="bi bi-headphones fs-4"></i>
                            </div>
                            <div>
                                <h6 class="fw-bold mb-0">Audio Panduan Terapi</h6>
                                <small class="text-muted">Disarankan menggunakan headset.</small>
                            </div>
                        </div>
                        <audio controls id="mainAudio" class="w-100" style="height: 40px;">
                            <source src="" type="audio/mpeg">
                        </audio>
                    </div>

                    <div class="article-content" id="mContent">
                        </div>

                    <div class="action-bar">
                        <button class="btn-modern btn-prev" id="btnPrev">
                            <i class="bi bi-arrow-left me-2"></i> Sebelumnya
                        </button>
                        
                        <button class="btn-modern btn-done" onclick="markAsDone()">
                            <i class="bi bi-check-circle-fill me-2"></i> Selesai
                        </button>

                        <button class="btn-modern btn-next" id="btnNext">
                            Selanjutnya <i class="bi bi-arrow-right ms-2"></i>
                        </button>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // --- LOGOUT LOGIC ---
        function handleLogout() {
            Swal.fire({
                title: 'Keluar?',
                text: "Sesi Anda akan diakhiri.",
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Ya, Keluar'
            }).then((result) => {
                if (result.isConfirmed) {
                    localStorage.clear(); 
                    window.location.href = '../login.html'; 
                }
            });
        }

        // --- 1. KONTEN MATERI LENGKAP & MENDALAM ---
        const modulesData = [
            {
                id: 1,
                title: "Pengenalan Resiliensi & Definisi NLP",
                type: "Teori Dasar",
                category: "text",
                duration: "15 Menit",
                content: `
                    <p class="lead text-dark">Di era globalisasi dan perkembangan teknologi yang cepat ini, siswa sering kali menghadapi tekanan akademik, sosial, dan emosional yang tinggi. Kondisi ini dapat mempengaruhi keseimbangan mental. Oleh karena itu, kita membutuhkan <strong>Resiliensi</strong>â€”kemampuan untuk tetap tangguh, optimis, serta mampu beradaptasi dengan perubahan.</p>
                    
                    <h3>Mengapa Menggunakan NLP?</h3>
                    <p>Neuro-Linguistic Programming (NLP) dikembangkan pada tahun 1970-an oleh Richard Bandler dan John Grinder. Pendekatan ini dipilih karena kemampuannya mengintegrasikan pola pikir, bahasa, dan perilaku untuk membantu individu mentransformasikan pengalaman hidup secara positif.</p>

                    <h3>Bedah Anatomi NLP</h3>
                    <p>Istilah NLP terdiri dari tiga komponen utama yang saling terhubung:</p>
                    <div class="highlight-box">
                        <ul>
                            <li><strong>Neuro (N):</strong> Berkaitan dengan sistem saraf dan panca indra (visual, auditori, kinestetik). Ini adalah "corong" bagaimana kita menerima informasi dari dunia luar.</li>
                            <li><strong>Linguistic (L):</strong> Mengacu pada kemampuan komunikasi, baik verbal (pilihan kata/frase) maupun non-verbal (bahasa tubuh, postur, gerak mata). Bahasa mempengaruhi pikiran bawah sadar kita.</li>
                            <li><strong>Programming (P):</strong> Mengacu pada pola pikir, perasaan, dan tindakan yang sudah "terprogram" dalam diri kita. Berita baiknya: perilaku dan kebiasaan lama bisa diganti (reprogram) dengan kebiasaan baru yang lebih positif.</li>
                        </ul>
                    </div>
                    
                    <h3>Tujuan Pembelajaran Modul Ini</h3>
                    <p>Tujuan utama integrasi ini adalah membentuk individu yang tangguh secara mental, adaptif terhadap tantangan, dan memiliki pola pikir yang memberdayakan dalam kehidupan sehari-hari.</p>
                `
            },
            {
                id: 2,
                title: "Prinsip Dasar & 4 Pilar Utama NLP",
                type: "Konsep Inti",
                category: "text",
                duration: "15 Menit",
                content: `
                    <h3>Presupposisi: Peta Bukanlah Wilayah</h3>
                    <p>Salah satu asumsi dasar (presupposisi) terpenting dalam NLP adalah: <em>"The Map is Not the Territory"</em> (Peta bukanlah wilayah yang sebenarnya).</p>
                    <p>Artinya, apa yang kita persepsikan tentang dunia hanyalah representasi subjektif (peta) kita sendiri, bukan realitas mutlak. Setiap orang merespons peristiwa berdasarkan "peta internal" mereka sendiri, yang dipengaruhi oleh keyakinan dan filter mental masing-masing.</p>
                    <p><strong>Implikasinya:</strong> Jika kita mengubah cara pandang (peta) kita terhadap masalah, maka perasaan dan respon kita terhadap masalah tersebut juga akan berubah.</p>

                    <h3>4 Pilar Utama Keberhasilan NLP</h3>
                    <p>NLP memiliki empat pilar yang membentuk siklus dinamis untuk mencapai hasil yang efektif:</p>
                    <div class="highlight-box">
                        <ol>
                            <li><strong>Rapport (Hubungan Harmonis):</strong> Kemampuan membangun kedekatan dan kepercayaan dengan orang lain. Tanpa rapport, komunikasi sulit terjadi.</li>
                            <li><strong>Sensory Acuity (Kepekaan Indera):</strong> Kemampuan untuk peka membaca tanda-tanda non-verbal dari orang lain atau lingkungan (seperti perubahan napas, warna wajah, atau nada suara).</li>
                            <li><strong>Outcome (Tujuan Jelas):</strong> Mengetahui dengan spesifik apa yang ingin dicapai. Fokus pada hasil (outcome oriented), bukan pada masalah.</li>
                            <li><strong>Behavioral Flexibility (Fleksibilitas Perilaku):</strong> Kemampuan untuk mengubah perilaku. Prinsipnya: "Orang dengan fleksibilitas paling tinggi akan mengendalikan sistem". Jika satu cara gagal, coba cara lain.</li>
                        </ol>
                    </div>
                `
            },
            {
                id: 3,
                title: "Teknik Reframing (Membingkai Ulang)",
                type: "Teknik NLP",
                category: "text",
                duration: "20 Menit",
                content: `
                    <h3>Definisi Reframing</h3>
                    <p>Reframing adalah teknik untuk mengubah sudut pandang atau makna dari suatu peristiwa, perilaku, atau situasi. Teknik ini didasari prinsip bahwa <em>"Makna beroperasi tergantung pada konteksnya"</em>.</p>
                    
                    <h3>Mengapa Perlu Reframing?</h3>
                    <p>Seringkali kita terjebak dalam emosi negatif karena memberi makna buruk pada suatu kejadian. Dengan reframing, kita melatih otak untuk mencari makna lain yang lebih memberdayakan, sehingga kita bisa keluar dari kondisi negatif.</p>
                    
                    <div class="highlight-box">
                        <h5>Contoh Penerapan Nyata:</h5>
                        <p><strong>Situasi:</strong> Anda mengalami kegagalan dalam ujian atau kompetisi.</p>
                        <ul>
                            <li><strong>Bingkai Lama (Negatif):</strong> "Saya gagal total. Ini akhir dari segalanya. Saya memang tidak mampu." (Respon: Sedih, putus asa).</li>
                            <li><strong>Reframing (Positif):</strong> "Kegagalan ini bukanlah akhir, melainkan sebuah umpan balik (feedback). Ini memberitahu saya bahwa strategi belajar saya perlu diperbaiki. Ini adalah kesempatan belajar agar saya lebih siap di masa depan." (Respon: Termotivasi, evaluasi diri).</li>
                        </ul>
                    </div>
                    <p>Ingat, reframing bukan membohongi diri sendiri, tapi memilih perspektif yang membuat Anda lebih berdaya untuk bertindak.</p>
                `
            },
            {
                id: 4,
                title: "Teknik Anchoring (Menanam Jangkar Emosi)",
                type: "Praktik",
                category: "audio",
                duration: "15 Menit",
                audioSrc: "../assets/audio terapi.mp3", 
                content: `
                    <h3>Apa itu Anchoring?</h3>
                    <p>Anchoring adalah proses menghubungkan suatu keadaan emosi internal yang kuat (seperti rasa percaya diri, tenang, atau bahagia) dengan stimulus eksternal tertentu (gerakan tubuh atau kata-kata).</p>
                    <p>Tujuannya adalah agar Anda dapat memanggil kembali ("mengakses") rasa percaya diri atau ketenangan tersebut kapan saja saat dibutuhkan, hanya dengan memicu stimulus yang sudah dilatih.</p>
                    
                    <div class="highlight-box">
                        <h5>Langkah-Langkah Praktik (Self-Anchoring):</h5>
                        <ol>
                            <li><strong>Recall (Mengingat):</strong> Tutup mata dan ingat kembali momen spesifik di masa lalu saat Anda merasa SANGAT percaya diri atau sangat bahagia.</li>
                            <li><strong>Intensify (Memperkuat):</strong> Masuklah ke dalam ingatan itu. Lihat apa yang Anda lihat, dengar apa yang Anda dengar, dan rasakan perasaannya sekuat mungkin di tubuh Anda.</li>
                            <li><strong>Anchor (Menjangkar):</strong> Tepat saat emosi tersebut mencapai puncaknya, lakukan gerakan unik yang jarang dilakukan (misalnya: menekan jempol dan jari tengah tangan kiri dengan kuat). Tahan selama 5-10 detik sambil menikmati perasaannya.</li>
                            <li><strong>Break & Test:</strong> Lepaskan gerakan, buka mata, dan rileks (break state). Kemudian, coba lakukan gerakan tadi lagi. Jika berhasil, Anda akan merasakan kembali emosi positif tersebut muncul secara otomatis.</li>
                        </ol>
                    </div>
                `
            },
            {
                id: 5,
                title: "Swish Pattern & Membangun Rapport",
                type: "Teknik Lanjutan",
                category: "text",
                duration: "20 Menit",
                content: `
                    <h3>1. Swish Pattern: Mengganti Kebiasaan Buruk</h3>
                    <p>Teknik Swish Pattern digunakan untuk membantu siswa mengganti kebiasaan atau respon otomatis yang tidak produktif (seperti menunda-nunda tugas, gugup, atau merokok) dengan perilaku baru yang lebih baik.</p>
                    <p>Caranya adalah dengan memvisualisasikan "gambar pemicu" (kebiasaan lama) dan secara cepat menukarnya dengan "gambar diri ideal" (perilaku baru). Otak dilatih untuk langsung beralih ke perilaku baru saat pemicu muncul.</p>

                    <hr class="my-4">

                    <h3>2. Rapport Building: Kunci Komunikasi</h3>
                    <p>Rapport adalah kondisi di mana tercipta hubungan yang harmonis, saling percaya, dan responsif. Ini adalah dasar dari komunikasi efektif.</p>
                    
                    <h5>Teknik Membangun Rapport:</h5>
                    <ul>
                        <li><strong>Komunikasi Non-Verbal:</strong> Perhatikan bahasa tubuh lawan bicara. Gunakan kontak mata yang nyaman dan senyuman.</li>
                        <li><strong>Matching & Mirroring:</strong> Secara halus menyamakan postur tubuh, gestur, atau nada suara dengan lawan bicara untuk menciptakan kesamaan.</li>
                        <li><strong>Empati:</strong> Mendengarkan dengan tulus untuk memahami perasaan lawan bicara, bukan sekadar untuk menjawab.</li>
                        <li><strong>Pacing & Leading:</strong> "Pacing" artinya menyelaraskan diri dengan ritme siswa/lawan bicara terlebih dahulu (mengikuti), baru kemudian "Leading" atau memimpin mereka ke arah perubahan yang diinginkan.</li>
                    </ul>
                `
            },
            {
                id: 6,
                title: "Strategi Belajar: Experiential Learning",
                type: "Metodologi",
                category: "text",
                duration: "15 Menit",
                content: `
                    <h3>Belajar dari Pengalaman (Learning by Doing)</h3>
                    <p>Kurikulum NLP ini menerapkan prinsip <em>Experiential Learning</em>, yang menekankan bahwa pengetahuan paling efektif diperoleh melalui proses mengalami langsung, bukan sekadar teori hafalan.</p>
                    
                    <div class="highlight-box">
                        <h5>Siklus Pembelajaran 4 Tahap:</h5>
                        <ol>
                            <li><strong>Experience (Mengalami):</strong> Siswa diberikan simulasi, latihan mental, atau aktivitas yang memunculkan pengalaman emosional atau sosial tertentu.</li>
                            <li><strong>Reflect (Merefleksikan):</strong> Siswa diajak menganalisis apa yang mereka rasakan, pikirkan, dan pelajari dari pengalaman tersebut. Introspeksi ini memperkuat kesadaran diri.</li>
                            <li><strong>Conceptualize (Menarik Konsep):</strong> Guru membantu siswa menghubungkan pengalaman tadi dengan teori NLP (misalnya: "Oh, ternyata perasaan tenang tadi muncul karena teknik anchoring").</li>
                            <li><strong>Apply (Menerapkan):</strong> Siswa diminta menerapkan pemahaman dan keterampilan baru tersebut dalam situasi nyata di kehidupan sehari-hari (misal: saat menghadapi ujian atau konflik teman).</li>
                        </ol>
                    </div>

                    <h3>Prinsip Metodologis Lainnya</h3>
                    <ul>
                        <li><strong>Kontekstual:</strong> Materi dikaitkan dengan situasi nyata siswa (ujian, pergaulan).</li>
                        <li><strong>Kolaboratif:</strong> Belajar dalam suasana saling mendukung dan empati.</li>
                        <li><strong>Seimbang:</strong> Memadukan pemahaman konsep teori dengan latihan keterampilan praktik.</li>
                    </ul>
                `
            }
        ];

        // --- 2. LOGIKA RENDER (TIDAK BERUBAH) ---
        const urlParams = new URLSearchParams(window.location.search);
        let currentId = parseInt(urlParams.get('id')) || 1;

        function loadModule(id) {
            const data = modulesData.find(m => m.id === id);
            if (!data) return;

            // Render Header
            document.getElementById('mTitle').innerText = data.title;
            document.getElementById('mCategory').innerText = data.type;
            document.getElementById('mDuration').innerText = data.duration;
            document.getElementById('mContent').innerHTML = data.content;

            // Render Audio
            const audioDiv = document.getElementById('audioContainer');
            const audioTag = document.getElementById('mainAudio');
            
            if (data.category === 'audio' && data.audioSrc) {
                audioDiv.classList.remove('d-none');
                audioTag.src = data.audioSrc;
            } else {
                audioDiv.classList.add('d-none');
                audioTag.pause();
            }

            // Render Sidebar
            const listContainer = document.getElementById('moduleList');
            listContainer.innerHTML = '';
            modulesData.forEach(mod => {
                const isActive = mod.id === currentId ? 'active' : '';
                const icon = mod.category === 'audio' ? 'bi-play-fill' : (mod.category === 'video' ? 'bi-film' : 'bi-book');
                
                listContainer.innerHTML += `
                    <div class="module-item ${isActive} d-flex align-items-center" onclick="goToModule(${mod.id})">
                        <div class="module-icon me-3">
                            <i class="bi ${icon}"></i>
                        </div>
                        <div>
                            <div class="module-title small text-dark">${mod.title}</div>
                        </div>
                    </div>
                `;
            });

            updateButtons();
            window.scrollTo(0, 0);
        }

        // --- 3. NAVIGASI ---
        function goToModule(id) {
            currentId = id;
            const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?id=' + id;
            window.history.pushState({path:newUrl},'',newUrl);
            loadModule(id);
        }

        function updateButtons() {
            const btnPrev = document.getElementById('btnPrev');
            const btnNext = document.getElementById('btnNext');
            const currentIndex = modulesData.findIndex(m => m.id === currentId);

            // Prev
            if (currentIndex > 0) {
                btnPrev.disabled = false;
                btnPrev.onclick = () => goToModule(modulesData[currentIndex - 1].id);
            } else {
                btnPrev.disabled = true;
            }

            // Next
            if (currentIndex < modulesData.length - 1) {
                btnNext.innerHTML = 'Selanjutnya <i class="bi bi-arrow-right ms-2"></i>';
                btnNext.onclick = () => goToModule(modulesData[currentIndex + 1].id);
            } else {
                btnNext.innerHTML = 'Halaman Depan <i class="bi bi-house ms-2"></i>';
                btnNext.onclick = () => window.location.href = 'index.html';
            }
        }

        function markAsDone() {
            Swal.fire({
                title: 'Hebat!',
                text: 'Materi ini telah ditandai selesai.',
                icon: 'success',
                confirmButtonColor: '#0d6efd', // Warna Biru MindUp
                confirmButtonText: 'Lanjut',
                timer: 1500
            }).then(() => {
                const currentIndex = modulesData.findIndex(m => m.id === currentId);
                if (currentIndex < modulesData.length - 1) {
                    goToModule(modulesData[currentIndex + 1].id);
                }
            });
        }

        // --- 4. INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            const userName = localStorage.getItem('userName') || 'Sobat MindUp';
            document.getElementById('navUserName').innerText = userName;
            loadModule(currentId);
        });

    </script>
</body>

</html>
